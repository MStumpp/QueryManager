<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>QueryManager by MStumpp</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>QueryManager</h1>
        <p></p>

        <p class="view"><a href="https://github.com/MStumpp/QueryManager">View the Project on GitHub <small>MStumpp/QueryManager</small></a></p>


        <ul>
          <li><a href="https://github.com/MStumpp/QueryManager/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/MStumpp/QueryManager/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/MStumpp/QueryManager">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h2>
<a name="querymanager" class="anchor" href="#querymanager"><span class="octicon octicon-link"></span></a>QueryManager</h2>

<h3>
<a name="create-a-new-instance" class="anchor" href="#create-a-new-instance"><span class="octicon octicon-link"></span></a>Create a new instance</h3>

<p>Allocate an instance of the <strong>QueryManager</strong> in the following way.</p>

<pre><code>QueryManager *manager = [QueryManager instance];
</code></pre>

<h2>
<a name="queue" class="anchor" href="#queue"><span class="octicon octicon-link"></span></a>Queue</h2>

<h3>
<a name="create-a-new-instance-1" class="anchor" href="#create-a-new-instance-1"><span class="octicon octicon-link"></span></a>Create a new instance</h3>

<p>Allocate an instance of <strong>Queue</strong> in the following way.</p>

<pre><code>Queue *queue = [manager initQueueWithName:@"queue1"]
</code></pre>

<ul>
<li>name: A unique name per queue.</li>
</ul><h3>
<a name="retrieve-an-instance" class="anchor" href="#retrieve-an-instance"><span class="octicon octicon-link"></span></a>Retrieve an instance</h3>

<pre><code>Queue *queue = [manager queueWithName:@"queue1"]
</code></pre>

<h3>
<a name="properties-of-an-instance" class="anchor" href="#properties-of-an-instance"><span class="octicon octicon-link"></span></a>Properties of an instance</h3>

<ul>
<li>(NSArray*)operations: Queries in the queue.</li>
<li>(NSUInteger)operationCount: Number of queries in the queue.</li>
<li>(NSInteger)maxConcurrentOperationCount: Maximum of concurrent executing queries.</li>
<li>(BOOL)isSuspended: True if a queue is suspended, false otherwise.</li>
</ul><h3>
<a name="actions-on-an-instance" class="anchor" href="#actions-on-an-instance"><span class="octicon octicon-link"></span></a>Actions on an instance</h3>

<ul>
<li>(void)cancelAllOperations: Sets all queries in the queue to state "isCancelled".</li>
<li>(void)setMaxConcurrentOperationCount:(NSInteger)count: Sets the maximum of concurrent executing queries.</li>
<li>(void)setSuspended:(BOOL)suspend: Suspends (true) or resumes (false) the execution of queries.</li>
</ul><h2>
<a name="query" class="anchor" href="#query"><span class="octicon octicon-link"></span></a>Query</h2>

<h3>
<a name="implement-a-query" class="anchor" href="#implement-a-query"><span class="octicon octicon-link"></span></a>Implement a query</h3>

<pre><code>@interface QueryImpl : Query
@end

@implementation QueryImpl
-(void)load:(id)data
{
    - do the main stuff
    - whenever possible, check [self isCancelled], cancel if possible
    - must call [self loadedWithData:data andError:error] when finished
}

-(void)cancelled:(id)data
{
    - called exactly once
    - can call setData and/or setError before onCompletion handler gets called
}
@end
</code></pre>

<h3>
<a name="create-an-instance" class="anchor" href="#create-an-instance"><span class="octicon octicon-link"></span></a>Create an instance</h3>

<pre><code>Query *query = [[QueryImpl instanceWithQueue:queue] execute:(id)data onCompletion:^(int state, id data, NSError *error) {
   ...
}];
</code></pre>

<h3>
<a name="properties-of-an-instance-1" class="anchor" href="#properties-of-an-instance-1"><span class="octicon octicon-link"></span></a>Properties of an instance</h3>

<ul>
<li>(BOOL)isCancelled: Indicating whether in instance is cancelled.</li>
<li>(BOOL)isExecuting: Indicating whether in instance is executing.</li>
<li>(BOOL)isFinished: Indicating whether in instance is finished.</li>
<li>(BOOL)isReady: Indicating whether in instance is ready.</li>
<li>(NSOperationQueuePriority)queuePriority: Returns the priority of the query in a queue.</li>
</ul><h3>
<a name="actions-on-an-instance-1" class="anchor" href="#actions-on-an-instance-1"><span class="octicon octicon-link"></span></a>Actions on an instance</h3>

<ul>
<li>(void)cancel: Cancels a query.</li>
<li>(void)setQueuePriority:(NSOperationQueuePriority)priority: Sets the priority of the query.</li>
</ul>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/MStumpp">MStumpp</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>